export const isDebug=!1;let BASE_URL="https://flsdfl.pythonanywhere.com";isDebug?BASE_URL="http://127.0.0.1:5000":(console.log=function(){},console.error=function(){});export class UserState{constructor(t){this.uid=t.uid,this.language=t.language,this.score=t.score,this.balance=t.balance,this.reward=t.reward,this.referral=t.referral,this.tasks=t.tasks,this.bot=t.bot,this.bottombar=t.bottombar,this.tasksPage=t.tasksPage,this.leaderBoardPage=t.leaderBoardPage,this.cashOutPage=t.cashOutPage}}export async function getUserState(t,e,r,a,n,i){if(!t)return console.error("getConfig: uid is required"),null;let o=new URLSearchParams({uid:t,language:e,initData:i});r&&o.append("ref",r),a&&o.append("meta",a),n&&o.append("page",n);try{let s=await fetch(`${BASE_URL}/config?${o.toString()}`,{method:"GET"});if(!s.ok){let l=await s.text();return console.error(`Get config failed: ${l}`),null}let u=await s.json();return console.log("Json data ",u),new UserState(u)}catch(c){return console.error("getConfig fetch error:",c),null}}export async function updateUserState(t,e,r,a){if(!t)return console.error("updateUserState: uid is required"),null;let n=new URLSearchParams({uid:t,initData:a});try{let i=await fetch(`${BASE_URL}/config?${n.toString()}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({score_best:e,balance:{value:r}})});if(!i.ok){let o=await i.text();return console.error(`updateUserState failed: ${o}`),null}return await i.text()}catch(s){return console.error("updateUserState fetch error:",s),null}}export async function postTransaction(t,e,r,a,n){if(!t)return console.error("postTransaction: uid is required"),null;if(!e)return console.error("postTransaction: tg_user_name is required"),null;if(null==r)return console.error("postTransaction: amount is required"),null;let i=new URLSearchParams({uid:t,initData:n});try{let o=await fetch(`${BASE_URL}/transaction?${i.toString()}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({tg_user_name:e,amount:r,wallet_info:a})});if(!o.ok){let s=await o.text();return console.error(`Post transaction failed: ${s}`),null}let l=await o.json();return console.log("back response ",l),l}catch(u){return console.error("postTransaction fetch error:",u),null}}export async function postTaskComplete(t,e,r){if(!t)return console.error("postTaskComplete: uid is required"),null;if(!e)return console.error("postTaskComplete: task_id is required"),null;let a=new URLSearchParams({uid:t,task_id:e,initData:r});try{let n=await fetch(`${BASE_URL}/task/complete?${a.toString()}`,{method:"POST"});if(!n.ok){let i=await n.text();return console.error(`Post task complete failed: ${i}`),null}return await n.text()}catch(o){return console.error("postTaskComplete fetch error:",o),null}}export async function getactivatexinvoice(t,e,r){if(!t)return console.error("getactivatexinvoice: uid is required"),null;if(!e)return console.error("getactivatexinvoice: language is required"),null;let a=new URLSearchParams({uid:t,language:e,initData:r});try{let n=await fetch(`${BASE_URL}/activatexinvoice?${a.toString()}`,{method:"GET"});if(!n.ok){let i=await n.text();return console.error(`getactivatexinvoice failed: ${i}`),null}let o=await n.json();return console.log(`getactivatexinvoice success ${o}`),o}catch(s){return console.error("getactivatexinvoice fetch error:",s),null}}